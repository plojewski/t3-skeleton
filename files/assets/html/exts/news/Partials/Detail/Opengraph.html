{namespace n=GeorgRinger\News\ViewHelpers}

<f:if condition="{newsItem.alternativeTitle}">
	<f:then><n:metaTag property="og:title" content="{newsItem.alternativeTitle}" /></f:then>
	<f:else><n:metaTag property="og:title" content="{newsItem.title}" /></f:else>
</f:if>

<n:metaTag name="keywords" content="{newsItem.keywords}"/>

<f:if condition="{newsItem.description}">
    <f:then>
        <n:metaTag name="description" content="{newsItem.description}"/>
        <n:metaTag property="og:description" content="{newsItem.description}"/>
    </f:then>
    <f:else>
        <f:if condition="{newsItem.teaser}">
            <f:then>
                <n:metaTag name="description" content="{newsItem.teaser -> f:format.stripTags()}"/>
                <n:metaTag property="og:description" content="{newsItem.teaser -> f:format.stripTags()}"/>
            </f:then>
            <f:else>
		<n:metaTag name="description" content='<f:format.crop maxCharacters="300">{newsItem.bodytext -> f:format.stripTags()}</f:format.crop>'/>
		<n:metaTag property="og:description" content='<f:format.crop maxCharacters="300">{newsItem.bodytext -> f:format.stripTags()}</f:format.crop>'/>
            </f:else>
        </f:if>
    </f:else>
</f:if>

<n:metaTag property="og:type" content="{settings.opengraph.type}" />
<n:metaTag property="og:url" content="" useCurrentDomain="1" />
<n:metaTag property="og:site_name" content="{settings.opengraph.site_name}" />
<n:metaTag property="fb:admins" content="{settings.opengraph.admins}" />
<n:metaTag property="og:locality" content="{settings.opengraph.locality}" />

<f:if condition="{newsItem.firstFalImagePreview}">
    <f:then>
        <n:metaTag
                property="og:image"
                content="{f:uri.image(src:'{newsItem.firstFalImagePreview.uid}' treatIdAsReference:1 maxWidth:'500')}"
                forceAbsoluteUrl="1"/>
    </f:then>
    <f:else>
        <f:if condition="{newsItem.firstImagePreview.image}">
            <n:metaTag
                    property="og:image"
                    content="{f:uri.image(src:'uploads/tx_news/{newsItem.firstImagePreview.image}' maxWidth:'500')}"
                    forceAbsoluteUrl="1"/>
        </f:if>
    </f:else>
</f:if>
